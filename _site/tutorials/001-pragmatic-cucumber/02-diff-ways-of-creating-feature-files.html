<!DOCTYPE html>
<html lang=" en-US">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />
    <title>Madras Coder</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon-16x16.png">
    <link rel="manifest" href="/assets/images/site.webmanifest">
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
    <link type="application/atom+xml" rel="alternate" href="https://www.madrascoder.com/feed.xml" title="Madras Coder" />
    <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Different patterns of creating Cucumber Feature files | Madras Coder</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Different patterns of creating Cucumber Feature files" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="In this chapter, let us see different patterns of creating feature files, their pros and cons. You may learn all the patterns and use them accordingly." />
<meta property="og:description" content="In this chapter, let us see different patterns of creating feature files, their pros and cons. You may learn all the patterns and use them accordingly." />
<link rel="canonical" href="https://www.madrascoder.com/tutorials/001-pragmatic-cucumber/02-diff-ways-of-creating-feature-files.html" />
<meta property="og:url" content="https://www.madrascoder.com/tutorials/001-pragmatic-cucumber/02-diff-ways-of-creating-feature-files.html" />
<meta property="og:site_name" content="Madras Coder" />
<meta property="og:image" content="https://www.madrascoder.com/assets/media/tutorials/001-pragmatic-cucumber/chapter2/chuttersnap-cJxxfSEbO8Y-unsplash.jpg" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://www.madrascoder.com/assets/media/tutorials/001-pragmatic-cucumber/chapter2/chuttersnap-cJxxfSEbO8Y-unsplash.jpg" />
<meta property="twitter:title" content="Different patterns of creating Cucumber Feature files" />
<script type="application/ld+json">
{"url":"https://www.madrascoder.com/tutorials/001-pragmatic-cucumber/02-diff-ways-of-creating-feature-files.html","image":"https://www.madrascoder.com/assets/media/tutorials/001-pragmatic-cucumber/chapter2/chuttersnap-cJxxfSEbO8Y-unsplash.jpg","headline":"Different patterns of creating Cucumber Feature files","description":"In this chapter, let us see different patterns of creating feature files, their pros and cons. You may learn all the patterns and use them accordingly.","@type":"WebPage","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>
    <nav>
    <ul class="menu">
        <li class="logo">
            <a href="https://www.madrascoder.com">Madras Coder</a>
        </li>
        <li class="toggle"><a href="#"><i onclick="toggleMenu(this)" class="toggle-menu fas fa-bars fa-2x"></i></a></li>
        <li class="item"><a href="https://www.madrascoder.com">Home</a></li>
        <li class="item"><a href="/articles">Articles</a></li>
        <li class="item"><a href="/tutorials">Tutorials</a></li>
        <li class="item"><a href="/about.html">About</a></li>
        <li class="item">
            <a href="#"><i onclick="toggleDarkMode(this)" class="fas fa-moon"></i></a>
        </li>
    </ul>
</nav>
    <main class="tutorial-content">
        <img src="/assets/media/tutorials/001-pragmatic-cucumber/chapter2/chuttersnap-cJxxfSEbO8Y-unsplash.jpg" title="Different patterns of creating Cucumber Feature files" />
        <p></p>
        <h1>Different patterns of creating Cucumber Feature files</h1>
        <p>In this chapter, let us see different patterns of creating feature files, their pros and cons. You may learn all the patterns and use them accordingly.
</p>
        <hr>
        <p>When I read books like Cucumber For Java, Cucumber Cookbook, writing feature files <strong>sounded easy</strong>, but when I sat down to write feature files and step definitions it was difficult. Didn’t mean to say the books are not good, they are the best books for one to get started with BDD and Cucumber. One of the reason why I felt difficult was,</p>

<blockquote>
  <p>Creating feature files that are easy to read ended up having lots of step definition code and creating feature files to simplify development ended up having feature files that was hard to understand by product owner.</p>
</blockquote>

<p><strong>Writing feature file is an art</strong>, it requires a lot of trial and error until the Software Engineer, Quality Analyst and Product Owner are all in same line of understanding.</p>

<p>I have been doing BDD for few years now. During this time, I discovered different patterns for creating feature files. Let us see some of the basic patterns here and learn other advanced patterns in the coming chapters.</p>

<hr />

<h3 id="sample-use-case">Sample Use Case</h3>

<p>Imagine we are building a Calculator product and it has <strong>Addition</strong> feature. Now, let us take one scenario <strong>“Sum of numbers”</strong> and see different ways of writing a feature file for it. Assuming you have already read about Cucumber, Feature file etc., let me jump and show some <strong>patterns</strong> of feature file and corresponding step definitions code.</p>

<hr />

<h3 id="pattern-1-all-fieldsinputs-in-one-step">Pattern 1: All Fields/Inputs in One Step</h3>

<p>In the below stated feature file, you may notice that the 2 numbers (inputs) to calculate the <strong>sum</strong> are stated in a single <code class="language-plaintext highlighter-rouge">Given</code> step.</p>

<p><strong>Feature File</strong></p>

<div class="language-cucumber highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">Feature</span><span class="p">:</span> Addition
  <span class="kn">Scenario</span><span class="p">:</span> Sum of two numbers
    <span class="nf">Given </span>first number is 10 and second number is 20
    <span class="nf">When </span>user executes sum function
    <span class="nf">Then </span>the sum is 30
</code></pre></div></div>

<p><strong>Corresponding Step Definitions Class</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">io.cucumber.java.en.Given</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AdditionStepDefinitions</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kt">int</span> <span class="n">firstNumber</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kt">int</span> <span class="n">secondNumber</span><span class="o">;</span>

  <span class="nd">@Given</span><span class="o">(</span><span class="s">"first number is {int} and second number is {int}"</span><span class="o">)</span> 
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">firstNumberIs</span><span class="o">(</span><span class="kt">int</span> <span class="n">firstNumber</span><span class="o">,</span> <span class="kt">int</span> <span class="n">secondNumber</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">firstNumber</span> <span class="o">=</span> <span class="n">firstNumber</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">secondNumber</span> <span class="o">=</span> <span class="n">secondNumber</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@When</span><span class="o">(</span><span class="s">"user executes sum function"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">userExecutesSumFunction</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">calculatedSum</span> <span class="o">=</span> <span class="n">firstNumber</span> <span class="o">+</span> <span class="n">secondNumber</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@Then</span><span class="o">(</span><span class="s">"the sum is {int}"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">theSumIs</span><span class="o">(</span><span class="kt">int</span> <span class="n">expectedSum</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">calculatedSum</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">expectedSum</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>Note:</strong> This approach is more straight forward, it is very easy for a Product Owner to understand. But if you want to turn this scenario to support sum of 3, 4, 5 numbers, this style may not suite well.</p>

<p><strong>Learning:</strong> One thing you can learn in this pattern is, you can capture any value as arguments from a step and use it for testing like how we captured 2 integers from {int} placeholder in above said step definition code.</p>

<hr />

<h3 id="pattern-2-one-step-per-fieldinput">Pattern 2: One Step Per Field/Input</h3>

<p>In the below stated feature file, 2 numbers (inputs) required to calculate the <strong>sum</strong> are stated as 2 different steps.</p>

<p><strong>Feature File</strong></p>

<div class="language-cucumber highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">Feature</span><span class="p">:</span> Addition
  <span class="kn">Scenario</span><span class="p">:</span> Sum of two numbers
    <span class="nf">Given </span>first number is 10
    <span class="nf">And </span>second number is 20
    <span class="nf">When </span>user executes sum function
    <span class="nf">Then </span>the sum is 30
</code></pre></div></div>

<p><strong>Corresponding Step Definitions Class - Type 1</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Version 1</span>
<span class="kn">import</span> <span class="nn">io.cucumber.java.en.And</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.cucumber.java.en.Given</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.cucumber.java.en.Then</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.cucumber.java.en.When</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AdditionStepDefinitions</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kt">int</span> <span class="n">firstNumber</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kt">int</span> <span class="n">secondNumber</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kt">int</span> <span class="n">calculatedSum</span><span class="o">;</span>

  <span class="nd">@Given</span><span class="o">(</span><span class="s">"first number is {int}"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">firstNumberIs</span><span class="o">(</span><span class="kt">int</span> <span class="n">firstNumber</span><span class="o">)</span> <span class="o">{</span> <span class="c1">// Method 1</span>
    <span class="k">this</span><span class="o">.</span><span class="na">firstNumber</span> <span class="o">=</span> <span class="n">firstNumber</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@And</span><span class="o">(</span><span class="s">"second number is {int}"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">secondNumberIs</span><span class="o">(</span><span class="kt">int</span> <span class="n">secondNumber</span><span class="o">)</span> <span class="o">{</span> <span class="c1">// Method 2</span>
    <span class="k">this</span><span class="o">.</span><span class="na">secondNumber</span> <span class="o">=</span> <span class="n">secondNumber</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="c1">// ...</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>Can this be improved?</strong> Yes.</p>

<p>There are 2 methods (<code class="language-plaintext highlighter-rouge">firstNumberIs</code>, <code class="language-plaintext highlighter-rouge">secondNumberIs</code>) in the above step definition class file, one for each step in scenario. As stated above in the beginning of the chapter, we can replace 2 methods into 1 method (<code class="language-plaintext highlighter-rouge">firstOrSecondNumberIs</code>) by using Cucumber Expressions. Let’s see how its done in below code</p>

<p><strong>Corresponding Step Definitions Class - Type 2</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">io.cucumber.java.en.Given</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.cucumber.java.en.Then</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.cucumber.java.en.When</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AdditionStepDefinitions</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">listOfNumbers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
  <span class="kd">private</span> <span class="kt">int</span> <span class="n">calculatedSum</span><span class="o">;</span>

  <span class="nd">@Given</span><span class="o">(</span><span class="s">"first/second number is {int}"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">firstOrSecondNumberIs</span><span class="o">(</span><span class="kt">int</span> <span class="n">number</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">listOfNumbers</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">number</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@When</span><span class="o">(</span><span class="s">"user executes sum function"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">userExecutesSumFunction</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">calculatedSum</span> <span class="o">=</span> <span class="n">listOfNumbers</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
        <span class="o">.</span><span class="na">mapToInt</span><span class="o">(</span><span class="nl">Integer:</span><span class="o">:</span><span class="n">intValue</span><span class="o">)</span>
        <span class="o">.</span><span class="na">sum</span><span class="o">();</span>
  <span class="o">}</span>
</code></pre></div></div>

<p>Annotation</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Given</span><span class="o">(</span><span class="s">"first/second number is {int}"</span><span class="o">)</span>
</code></pre></div></div>

<p>matches both the scenario steps stated below,</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Given first number is 10
And second number is 20
</code></pre></div></div>

<p>In the coming chapters, we will introduce some more reusable step definition patterns, so keep reading…</p>

<p><strong>Note:</strong> Steps in this feature file reads like a story, one after the other we gather the inputs, then we perform the action and finally we assert and check expected result. It is simple for anyone to understand. Imagine if we have 20+ fields and we need to capture the input for all of the fields, scenario will have 20+ <code class="language-plaintext highlighter-rouge">@Given</code> steps, one for each input. Reading feature file with 20+ steps is hard.</p>

<p><strong>Learning:</strong> One thing you can learn in this pattern is, you can gather inputs from various steps, save the state using instance variables of the class.</p>

<hr />

<h3 id="pattern-3-list-datatable">Pattern 3: List DataTable</h3>

<p>In the below stated Feature file, inputs or list of numbers to calculate the <strong>sum</strong> are represented in a Grid separated using pipe symbol, this grid is called as DataTable in Cucumber.</p>

<p><strong>Feature File</strong></p>

<div class="language-cucumber highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">Feature</span><span class="p">:</span> Addition
  <span class="kn">Scenario</span><span class="p">:</span> Sum of two numbers
    <span class="nf">Given </span>user wants to sum the following numbers
      <span class="p">|</span> <span class="nv">10</span> <span class="p">|</span>
      <span class="p">|</span> <span class="n">20</span> <span class="p">|</span>
    <span class="nf">When </span>user executes sum function
    <span class="nf">Then </span>the sum is 30
</code></pre></div></div>

<p><strong>Corresponding Step Definitions Class - Type 1</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">io.cucumber.datatable.DataTable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.cucumber.java.en.Given</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.cucumber.java.en.Then</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.cucumber.java.en.When</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AdditionStepDefinitions</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">listOfNumbers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
  <span class="kd">private</span> <span class="kt">int</span> <span class="n">calculatedSum</span><span class="o">;</span>

  <span class="nd">@Given</span><span class="o">(</span><span class="s">"user wants to sum the following numbers"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">userWantsToSumTheFollowingNumbers</span><span class="o">(</span><span class="nc">DataTable</span> <span class="n">dataTable</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">numbers</span> <span class="o">=</span> <span class="n">dataTable</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="nc">Integer</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="n">listOfNumbers</span><span class="o">.</span><span class="na">addAll</span><span class="o">(</span><span class="n">numbers</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="c1">// ...</span>
</code></pre></div></div>

<p>Following step definition method converts the data into a DataTable object and from that we use <code class="language-plaintext highlighter-rouge">dataTable.asList(Integer.class)</code> to convert that to a List<Integer>.</Integer></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">userWantsToSumTheFollowingNumbers</span><span class="o">(</span><span class="nc">DataTable</span> <span class="n">dataTable</span><span class="o">)</span>
</code></pre></div></div>

<p>You may be wondering, why this extra step of converting DataTable to a List.</p>

<p><strong>Can it be improved?</strong> Yes.</p>

<p><strong>Corresponding Step Definitions Class - Type 2</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">io.cucumber.datatable.DataTable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.cucumber.java.en.Given</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.cucumber.java.en.Then</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.cucumber.java.en.When</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AdditionStepDefinitions</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">listOfNumbers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">();</span>
  <span class="kd">private</span> <span class="kt">int</span> <span class="n">calculatedSum</span><span class="o">;</span>

  <span class="nd">@Given</span><span class="o">(</span><span class="s">"user wants to sum the following numbers"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">userWantsToSumTheFollowingNumbers</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">numbers</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">listOfNumbers</span><span class="o">.</span><span class="na">clear</span><span class="o">();</span>
    <span class="k">this</span><span class="o">.</span><span class="na">listOfNumbers</span><span class="o">.</span><span class="na">addAll</span><span class="o">(</span><span class="n">numbers</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="c1">// ...</span>
</code></pre></div></div>

<p><strong>Note:</strong> Cucumber can automatically convert DataTable to List as stated in above step definition code.</p>

<blockquote>
  <p>Some product owners like using these Grids or DataTables as they are very similar to spreadsheets look and feel which they are very familiar. If your product owner is of this type, then using DataTable is best for you.</p>
</blockquote>

<p><strong>Learning:</strong> One thing that you can learn in this pattern is, you can use DataTable to gather all inputs in one shot and Cucumber automatically converts them to <code class="language-plaintext highlighter-rouge">List&lt;T&gt;</code> or <code class="language-plaintext highlighter-rouge">List&lt;Map&lt;K, V&gt;&gt;</code> for you.</p>

<hr />

<h3 id="pattern-4-one-step-per-field-using-scenario-outline-and-examples-datatable">Pattern 4: One Step Per Field Using Scenario Outline and Examples DataTable</h3>

<p>In the below stated Feature file, there is <code class="language-plaintext highlighter-rouge">Scenario Outline</code> instead of <code class="language-plaintext highlighter-rouge">Scenario</code> and instead of getting input from steps, the input for test is in a <code class="language-plaintext highlighter-rouge">DataTable</code> under <code class="language-plaintext highlighter-rouge">Examples</code>.</p>

<p><strong>Feature File</strong></p>

<div class="language-cucumber highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">Feature</span><span class="p">:</span> Addition
  
  <span class="kn">Scenario Outline</span><span class="p">:</span> Sum of two numbers - version 5
    
    <span class="nf">Given </span>first number is <span class="nv">&lt;firstNumber&gt;</span>
    <span class="nf">And </span>second number is <span class="nv">&lt;secondNumber&gt;</span>
    <span class="nf">When </span>user executes sum function
    <span class="nf">Then </span>the sum is <span class="nv">&lt;result&gt;</span>

    <span class="nn">Examples</span><span class="p">:</span>
      <span class="p">|</span> <span class="nv">firstNumber</span> <span class="p">|</span> <span class="nv">secondNumber</span> <span class="p">|</span> <span class="nv">result</span> <span class="p">|</span>
      <span class="p">|</span> <span class="n">10</span>          <span class="p">|</span> <span class="n">20</span>           <span class="p">|</span> <span class="n">30</span>     <span class="p">|</span>
      <span class="p">|</span> <span class="n">50</span>          <span class="p">|</span> <span class="n">60</span>           <span class="p">|</span> <span class="n">110</span>    <span class="p">|</span>
</code></pre></div></div>

<p>Creating <code class="language-plaintext highlighter-rouge">Feature</code> file with a lots of <code class="language-plaintext highlighter-rouge">Scenario</code> is one way. Creating feature file with one <code class="language-plaintext highlighter-rouge">Scenario Outline</code> and executing the Scenario once for each example test case is another approach. One important point here is, <code class="language-plaintext highlighter-rouge">Scenario Outline</code> always require <code class="language-plaintext highlighter-rouge">Examples</code>.</p>

<p><strong>Note 1:</strong> Look at <code class="language-plaintext highlighter-rouge">&lt;firstNumber&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;secondNumber&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;result&gt;</code>, these are variables or placeholders and it will be replaced with values from the <code class="language-plaintext highlighter-rouge">Examples</code> DataTable.</p>

<p><strong>Note 2:</strong> Look at the <code class="language-plaintext highlighter-rouge">Examples</code> DataTable, first row of the DataTable is the header row and each header is like a variable name. Starting row 2, every row is like the value assigned to a variable. Row 2 and Row 3 in the DataTable can be considered as 2 Test Cases. When you run the Cucumber tests, the 2 rows of examples will be executed as 2 test cases, one for row 2 (‘10 + 20 = 30’) and one for row 3 (‘50 + 60 = 110’).</p>

<p><strong>Corresponding Step Definitions Class</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">assertj</span><span class="o">.</span><span class="na">core</span><span class="o">.</span><span class="na">api</span><span class="o">.</span><span class="na">Assertions</span><span class="o">.</span><span class="na">assertThat</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.cucumber.java.en.Given</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.cucumber.java.en.Then</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.cucumber.java.en.When</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AdditionStepDefinitions</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">listOfNumbers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
  <span class="kd">private</span> <span class="kt">int</span> <span class="n">calculatedSum</span><span class="o">;</span>

  <span class="nd">@Given</span><span class="o">(</span><span class="s">"first/second number is {int}"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">firstOrSecondNumberIs</span><span class="o">(</span><span class="kt">int</span> <span class="n">number</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">listOfNumbers</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">number</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@When</span><span class="o">(</span><span class="s">"user executes sum function"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">userExecutesSumFunction</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">calculatedSum</span> <span class="o">=</span> <span class="n">listOfNumbers</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
        <span class="o">.</span><span class="na">mapToInt</span><span class="o">(</span><span class="nl">Integer:</span><span class="o">:</span><span class="n">intValue</span><span class="o">)</span>
        <span class="o">.</span><span class="na">sum</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="nd">@Then</span><span class="o">(</span><span class="s">"the sum is {int}"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">theSumIs</span><span class="o">(</span><span class="kt">int</span> <span class="n">expectedSum</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">calculatedSum</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">expectedSum</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>Approach of using Scenario Outline and Examples are useful for validation use cases. Imagine you need to test 2 validations. “1. Sum function fails when first number is null”, “2. Sum function fails when second number is null”. Best way to create feature file is to use Scenario Outline with one example for each validation as stated above. Or, you may test one success test case and one failure test case.</p>

<p><strong>Learning:</strong> One thing that you can learn in this pattern is, <code class="language-plaintext highlighter-rouge">Scenario Outline</code> and <code class="language-plaintext highlighter-rouge">Examples</code> always go with each other and each example is like one test case.</p>

<hr />

<h3 id="pattern-5-mapkey-object-datatable-using-scenario-outline-and-examples">Pattern 5: Map&lt;Key, Object&gt; DataTable Using Scenario Outline and Examples</h3>

<p>In the below Feature file, both Scenario Outline step and Examples are represented as DataTable.</p>

<p><strong>Feature File</strong></p>
<div class="language-cucumber highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">Feature</span><span class="p">:</span> Addition
  
  <span class="kn">Scenario Outline</span><span class="p">:</span> Sum of two numbers

    <span class="nf">Given </span>user wants to sum the following numbers
      <span class="p">|</span> <span class="nv">firstNumber</span>  <span class="p">|</span> <span class="nv">&lt;firstNumber&gt;</span>  <span class="p">|</span>
      <span class="p">|</span> <span class="n">secondNumber</span> <span class="p">|</span> <span class="n">&lt;secondNumber&gt;</span> <span class="p">|</span>

    <span class="nf">When </span>user executes sum function
    <span class="nf">Then </span>the sum is <span class="nv">&lt;result&gt;</span>

    <span class="nn">Examples</span><span class="p">:</span>
      <span class="p">|</span> <span class="nv">firstNumber</span> <span class="p">|</span> <span class="nv">secondNumber</span> <span class="p">|</span> <span class="nv">result</span> <span class="p">|</span>
      <span class="p">|</span> <span class="n">10</span>          <span class="p">|</span> <span class="n">20</span>           <span class="p">|</span> <span class="n">30</span>     <span class="p">|</span>
      <span class="p">|</span> <span class="n">50</span>          <span class="p">|</span> <span class="n">50</span>           <span class="p">|</span> <span class="n">100</span>    <span class="p">|</span>
</code></pre></div></div>

<p>DataTable in the following step will be coverted to <code class="language-plaintext highlighter-rouge">Map&lt;String, Integer&gt;</code>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    Given user wants to sum the following numbers
      | firstNumber  | &lt;firstNumber&gt;  |
      | secondNumber | &lt;secondNumber&gt; |
</code></pre></div></div>

<p><strong>Corresponding Step Definitions Class</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">assertj</span><span class="o">.</span><span class="na">core</span><span class="o">.</span><span class="na">api</span><span class="o">.</span><span class="na">Assertions</span><span class="o">.</span><span class="na">assertThat</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.cucumber.java.en.Given</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.cucumber.java.en.Then</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.cucumber.java.en.When</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AdditionStepDefinitions</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">listOfNumbers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
  <span class="kd">private</span> <span class="kt">int</span> <span class="n">calculatedSum</span><span class="o">;</span>

  <span class="nd">@Given</span><span class="o">(</span><span class="s">"user wants to sum the following numbers"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">userWantsToSumTheFollowingNumbers</span><span class="o">(</span><span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">numbersMap</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">listOfNumbers</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">numbersMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"firstNumber"</span><span class="o">));</span>
    <span class="n">listOfNumbers</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">numbersMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"secondNumber"</span><span class="o">));</span>
  <span class="o">}</span>

  <span class="nd">@When</span><span class="o">(</span><span class="s">"user executes sum function"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">userExecutesSumFunction</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">calculatedSum</span> <span class="o">=</span> <span class="n">listOfNumbers</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
        <span class="o">.</span><span class="na">mapToInt</span><span class="o">(</span><span class="nl">Integer:</span><span class="o">:</span><span class="n">intValue</span><span class="o">)</span>
        <span class="o">.</span><span class="na">sum</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="nd">@Then</span><span class="o">(</span><span class="s">"the sum is {int}"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">theSumIs</span><span class="o">(</span><span class="kt">int</span> <span class="n">expectedSum</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">calculatedSum</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">expectedSum</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>Note:</strong> DataTable has 2 columns, first column correspond to the <code class="language-plaintext highlighter-rouge">Key</code> of the <code class="language-plaintext highlighter-rouge">Map</code> and second column is the <code class="language-plaintext highlighter-rouge">Value</code> of the <code class="language-plaintext highlighter-rouge">Map</code>, hence the method argument is a <code class="language-plaintext highlighter-rouge">Map</code>.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">userWantsToSumTheFollowingNumbers</span><span class="o">(</span><span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">numbersMap</span><span class="o">)</span>
</code></pre></div></div>

<p><strong>Learning:</strong> One thing that you can learn in this pattern is, you can use DataTable in any step of the scenario, scenario outline or example.</p>

<hr />

<h3 id="conclusion">Conclusion</h3>

<p>Now that you learnt creating Feature file and corresponding step definition, there is one important concept to understand. Here it is,</p>

<blockquote>
  <p>Feature files are executable specifications</p>
</blockquote>

<p>There are 2 pieces to the puzzle, one is <strong>specification</strong> and other is <strong>making it executable</strong>. As stated earlier, if execution (step definition code) is simplified, readability of feature file becomes hard and if readability of feature file is simplified, step definition code for execution becomes hard to maintain. The solution to art of creating and maintaining feature files is by finding a balance between readability and step definition code maintenance. This can be achieved by making developer and product owner work together to create feature files.</p>

<p><strong>In the next chapter,</strong> we will see how we can represent a Java Object as DataTable and convert a DataTable into a Java Object in step definitions.</p>

<hr />

<h3 id="references">References</h3>

<p>For more information on Cucumber Expressions you may refer<br />
<a href="https://cucumber.io/docs/cucumber/cucumber-expressions/" target="_blank">https://cucumber.io/docs/cucumber/cucumber-expressions/</a></p>

<p>For more information on DataTable, you may refer<br />
<a href="https://cucumber.io/docs/cucumber/api/?sbsearch=DataTable" target="_blank">https://cucumber.io/docs/cucumber/api/?sbsearch=DataTable</a></p>

<hr />

<h3 id="credits">Credits</h3>

<p>Photo by <a href="https://unsplash.com/@betteratf8?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" target="_blank">Weston MacKinnon</a> on <a href="https://unsplash.com/s/photos/change?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" target="_blank">Unsplash</a></p>

<hr />

<p><a href="/tutorials/001-pragmatic-cucumber/01-getting-started.html">Previous Chapter</a> | 
<a href="/tutorials/001-pragmatic-cucumber/02-diff-ways-of-creating-feature-files.html">Scroll Up to Top</a> | 
<a href="/tutorials/001-pragmatic-cucumber/">Table of Contents</a> |
<a href="/tutorials/001-pragmatic-cucumber/03-converting-datatable-to-java-object.html">Next Chapter</a></p>

    </main>
    <footer>
    <section class="legal">
        <ul>
            <li><a href="#"><i class="far fa-copyright"></i> Madras Coder</a></li>
            <li><a href="#">SiteMap</a></li>
            <li><a href="#">Credits</a></li>
        </ul>
    </section>
    <section class="social">
        <ul>
            <li>
                <a href="https://www.twitter.com/bcarun" target="_blank">
                    <i class="fab fa-twitter fa-2x"></i>
                </a>
            </li>
            <li>
                <a href="https://stackoverflow.com/users/story/1535606" target="_blank">
                    <i class="fab fa-stack-overflow fa-2x"></i>
                </a>
            </li>
            <li>
                <a href="https://github.com/bcarun" target="_blank">
                    <i class="fab fa-github fa-2x"></i>
                </a>
            </li>
            <li>
                <a href="https://www.linkedin.com/in/bcarun/" target="_blank">
                    <i class="fab fa-linkedin-in fa-2x"></i>
                </a>
            </li>
        </ul>
    </section>
</footer>
    <script src="/assets/scripts.js"></script>
</body>

</html>